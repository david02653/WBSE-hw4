<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pharmacy Search</title>
</head>
<style>
    body {
        background-color:darkgrey;
    }
    .header {
        text-align: center;
        background-color: goldenrod;
        color: white;
        font-size: 20px;
        padding: 5px;
    }
    .container {
        display: flex;
        flex-direction: column;
    }
    .item {
        flex-grow: 1;
        flex-shrink: 1;
    }
    .field {
        background-color:darkgray;
        text-align: center;
        flex-direction: row;
        display: flex;
        padding-top: 10px;
    }
    .disp {
        background-color: darkorange;
        flex-grow: 6;
        flex-shrink: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .panel {
        background-color: violet;
        flex-direction: column;
        display: flex;
        flex-grow: 4;
        padding-left: 5px;
        height: 40%;
    }
    .srh {
        background-color: aquamarine;
        flex-grow: 4;
        flex-shrink: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .inp {
        background-color:crimson;
        flex-grow: 6;
        flex-shrink: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    tr {
        margin: 7px;
        width: 100%;
        text-align: left;
        border: 1px solid black;
        border-collapse: collapse;
    }
    td {
        border: 1px solid black;
        border-collapse: collapse;
        width: 50%;
    }
    table {
        padding: 7px;
        border: 1px solid black;
        border-collapse: collapse;
    }
    input {
        margin: 4px;
    }
</style>
<body>
    <div class="container">
        <div class="header">
            <h2>Mask Search</h2>
            <p>help you to locate which pharmacy got masks</p>
        </div>
        <div class="field">
            <div class="disp" id="displayTable">
                <table>
                    <tr>
                        <td colspan="2" style="text-align: center">
                            data table
                        </td>
                    </tr>
                    <tr>
                        <td>id</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>name</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>address</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>phone</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>numberOfAdultMasks</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>numberOfChildrenMasks</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>updataTime</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>note</td>
                        <td></td>
                    </tr>
                </table>
            </div>

            <div class="panel">
                <div class="srh">
                    Pharmacy name:
                    <input type="text" id="pharmacyName" value="大同">
                    Address:
                    <input type="text" id="address" value="">
                    
                    <input id="search" type="button" value="Search">
                </div>
                <div class="inp">
                    Pharmacy id:
                    <input type="text" id="pharmacyId" value="">
                    Add Note:
                    <input type="text" id="noteArea" value="">
                    <input id="addNote" type="button" value="Add">
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    let urlBase = "http://localhost:8888/pharmacy";
    let getUrl = urlBase + `?pharmacyName=`
                         + `${document.getElementById("pharmacyName").value}`
                         + `&zone=`
                         + `${document.getElementById("address").value}`;

    //let getUrl = urlBase + `?pharmacyName=` + pharmacyKey + `&zone=` + zone;
    function getAllData() {
        console.log(getUrl);
        //console.log(`${document.getElementById("address").value}`)
        
        fetch(getUrl, {method: 'GET', headers: {
            'Content-Type': 'application/json'
        }})
        .then(function(res){
            return res.json();
        }).then(function(res){
            console.log(res);
            
        })
        /*
        fetch(getUrl, {mode: 'no-cors'}).then(res=>res.json()).then(res=>(
            function(res){
                console.log("run function");
                console.log(res);
                /*
                // add all data set into data display table
                let place = document.getElementById("displayTable");
                place.appendChild(`<table>
                <tr>
                    <td colspan="2" style="text-align: center">
                        ` + res + `
                    </td>
                </tr>
                <tr>
                    <td>id</td>
                    <td></td>
                </tr>
                <tr>
                    <td>name</td>
                    <td></td>
                </tr>
                <tr>
                    <td>address</td>
                    <td></td>
                </tr>
                <tr>
                    <td>phone</td>
                    <td></td>
                </tr>
                <tr>
                    <td>numberOfAdultMasks</td>
                    <td></td>
                </tr>
                <tr>
                    <td>numberOfChildrenMasks</td>
                    <td></td>
                </tr>
                <tr>
                    <td>updataTime</td>
                    <td></td>
                </tr>
                <tr>
                    <td>note</td>
                    <td></td>
                </tr>
            </table>`);
            
            }
        ));
        */
    }

    function clearDisplayTable(){
        document.getElementById("displayTable").innerHTML = "";
    }

    document.getElementById("search").addEventListener("click", getAllData);
</script>
</html>